<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nai ‚Äì Mock Interview Assessment</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#ffe6ef;
  --card:#fff0f5;
  --accent:#e91e63;
  --muted:#9b5c74;
  --text:#3b1f2b;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui;
  background:linear-gradient(180deg,#ffd1e3,var(--bg));
  color:var(--text);
  padding:14px;
}
.container{max-width:900px;margin:auto}
header{text-align:center;margin-bottom:12px}
h1{margin:0;font-size:22px}
.sub{font-size:13px;color:var(--muted)}

.progress{height:8px;background:#ffd6e5;border-radius:8px;overflow:hidden;margin:10px 0}
.progress div{height:100%;background:var(--accent);width:0%}

.controls{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:13px;
  margin-bottom:10px;
}
.controls label{cursor:pointer}

.card{background:var(--card);border-radius:16px;padding:16px;margin-bottom:14px}
.q{margin-bottom:14px}
.q h3{font-size:15px;margin:0 0 8px}
.opt{display:block;padding:10px;border:1px solid rgba(233,30,99,.3);border-radius:10px;margin-bottom:6px}
button{
  background:var(--accent);color:#fff;border:none;
  padding:10px 16px;border-radius:12px;font-size:14px;
}
.result{background:#ffd6e5;padding:14px;border-radius:12px;margin-top:12px}
.review{background:#fff;border-radius:10px;padding:10px;margin-bottom:8px;font-size:13px}
footer{text-align:center;color:var(--muted);font-size:13px;margin-top:20px}
.timer{font-weight:600;color:#b0004f}
</style>
</head>

<body>
<div class="container">

<header>
  <h1>‚úàÔ∏è Mock Interview Assessment</h1>
  <div class="sub">One step at a time ‚Ä¢ Calm & focused</div>
  <div class="progress"><div id="bar"></div></div>

  <div class="controls">
    <label>
      <input type="checkbox" id="timerToggle"> ‚è±Ô∏è Timer mode
    </label>
    <div id="timer" class="timer"></div>
  </div>
</header>

<div id="box" class="card"></div>

<footer>Nai üíó Progress matters more than perfection</footer>

</div>

<script>
let data, ass=0, totalScore=0;
let categoryScore = {};
let timerInterval, timeLeft=300;

fetch('Mock_Questions_Full.json')
.then(r=>r.json())
.then(j=>{
  data=j.assessments;
  loadState();
  loadAssessment();
});

function loadAssessment(){
  const a=data[ass];
  saveState();
  document.getElementById('bar').style.width=((ass)/20*100)+'%';

  if(document.getElementById('timerToggle').checked){
    startTimer();
  }else{
    stopTimer();
    document.getElementById('timer').textContent='';
  }

  let html=`<h2>${a.category} ‚Äì Assessment ${ass+1}/20</h2>`;
  a.questions.forEach((q,i)=>{
    html+=`
      <div class="q">
        <h3>${i+1}. ${q.q}</h3>
        ${q.options.map((o,ix)=>`
          <label class="opt">
            <input type="radio" name="q${i}" value="${ix}">
            ${o}
          </label>`).join('')}
      </div>`;
  });
  html+=`<button onclick="submit()">Submit</button>`;
  document.getElementById('box').innerHTML=html;
}

function submit(){
  stopTimer();
  const a=data[ass];
  let score=0, review='';

  a.questions.forEach((q,i)=>{
    const sel=document.querySelector(`input[name=q${i}]:checked`);
    const ok=sel && +sel.value===q.answer;
    if(ok){
      score++;
      totalScore++;
      categoryScore[a.category]=(categoryScore[a.category]||0)+1;
    }
    review+=`
      <div class="review">
        <b>Q:</b> ${q.q}<br>
        <b>Your:</b> ${sel?q.options[sel.value]:'Not answered'}<br>
        <b>Correct:</b> ${q.options[q.answer]}<br>
        <i>Explanation:</i> Focus on safety, calm communication & professionalism.
      </div>`;
  });

  document.getElementById('box').innerHTML=
    `<h2>Result ${score}/5</h2>
     <div class="result">${score>=4?'Excellent üå∏':'Good üíó Keep learning.'}</div>
     ${review}
     <button onclick="next()">Next Assessment</button>`;
}

function next(){
  ass++;
  if(ass<20){
    loadAssessment();
  }else{
    showFinal();
  }
}

function showFinal(){
  let breakdown='';
  Object.keys(categoryScore).forEach(c=>{
    breakdown+=`<div>${c}: ${categoryScore[c]} correct</div>`;
  });

  document.getElementById('box').innerHTML=
    `<h2>üéâ Completed</h2>
     <p><b>Final Score:</b> ${totalScore}/100</p>
     <div class="result">${breakdown}</div>
     <button onclick="retry()">Retry Weak Areas</button>`;
  localStorage.removeItem('mockProgress');
}

function retry(){
  ass=0; totalScore=0; categoryScore={};
  loadAssessment();
}

/* Timer */
function startTimer(){
  timeLeft=300;
  document.getElementById('timer').textContent='05:00';
  timerInterval=setInterval(()=>{
    timeLeft--;
    document.getElementById('timer').textContent=
      Math.floor(timeLeft/60).toString().padStart(2,'0')+':' +
      (timeLeft%60).toString().padStart(2,'0');
    if(timeLeft<=0){
      clearInterval(timerInterval);
      submit();
    }
  },1000);
}
function stopTimer(){
  clearInterval(timerInterval);
}

/* Save progress */
function saveState(){
  localStorage.setItem('mockProgress',JSON.stringify({
    ass,totalScore,categoryScore
  }));
}
function loadState(){
  const s=localStorage.getItem('mockProgress');
  if(s){
    const p=JSON.parse(s);
    ass=p.ass; totalScore=p.totalScore; categoryScore=p.categoryScore;
  }
}
</script>

</body>
</html>
