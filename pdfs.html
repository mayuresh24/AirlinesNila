<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nai Airlines – PDF Library</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#ffe6ef;          /* light pink background */
  --card:#fff0f5;        /* soft card pink */
  --accent:#e91e63;      /* rose accent */
  --muted:#9b5c74;       /* muted text */
}
*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter,system-ui;
  background:linear-gradient(180deg,#ffd1e3,var(--bg));
  color:#3b1f2b;
  padding:16px;
}

.container{
  max-width:1100px;
  margin:auto;
}

/* Header */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:16px;
}
.logo{
  width:46px;
  height:46px;
  background:linear-gradient(135deg,var(--accent),#ff8fb1);
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  color:#ffffff;
}
h1{margin:0;font-size:20px}
.sub{font-size:13px;color:var(--muted)}

a.back{
  color:#b0004f;
  text-decoration:none;
  font-size:14px;
  font-weight:600;
}

/* Controls */
.controls{
  display:flex;
  gap:10px;
  margin-bottom:14px;
  flex-wrap:wrap;
}
input,select{
  padding:10px 12px;
  border-radius:10px;
  border:1px solid rgba(233,30,99,0.25);
  background:#fff0f5;
  color:#3b1f2b;
  font-size:14px;
}

/* List */
.list{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
}
@media(max-width:900px){
  .list{grid-template-columns:repeat(2,1fr)}
}
@media(max-width:520px){
  .list{grid-template-columns:1fr}
}

.card{
  background:var(--card);
  padding:14px;
  border-radius:12px;
  cursor:pointer;
  transition:0.2s;
}
.card:hover{
  outline:2px solid var(--accent);
  transform:translateY(-2px);
}
.card h3{
  margin:0 0 6px 0;
  font-size:14px;
}
.meta{
  font-size:12px;
  color:var(--muted);
}

/* Footer */
footer{
  margin-top:20px;
  font-size:13px;
  color:var(--muted);
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
}
</style>
</head>

<body>
<div class="container">

<header>
  <div style="display:flex;gap:12px;align-items:center">
    <div class="logo">NILA</div>
    <div>
      <h1>PDF Interview Library</h1>
      <div class="sub">Tap a PDF to view</div>
    </div>
  </div>
  <a href="index.html" class="back">← Home</a>
</header>

<div class="controls">
  <input id="search" placeholder="Search PDF..." oninput="renderList()">
<select id="filter" onchange="renderList()">
  <option value="all">All</option>
  <option value="interview">Interview</option>
  <option value="basics">Basics</option>
  <option value="mock">Mock</option>
  <option value="technical">Technical</option>
  <option value="english">English</option>
  <option value="communication">Communication</option>
  <option value="workplace">Workplace</option>
  <option value="assignment">Assignment</option>
  <option value="grooming">Grooming</option>
</select>
</div>

<div id="pdfList" class="list"></div>

<footer>
  <div>© Nai Airlines Dream</div>
</footer>

</div>

<script>
let pdfs = [];

/* Load PDFs from resources.json */
async function loadPDFs(){
  const url =
    "https://raw.githubusercontent.com/mayuresh24/AirlinesNila/main/resources.json";

  try{
    const res = await fetch(url);
    const data = await res.json();

    // normalize tags + type (lowercase)
    pdfs = (Array.isArray(data) ? data : [])
      .map(p => ({
        ...p,
        type: (p.type || "").toLowerCase(),
        tags: Array.isArray(p.tags)
          ? p.tags.map(t => t.toLowerCase())
          : []
      }))
      .filter(p => p.type === "pdf")
      .slice(0,50);

    renderList();
  }catch(e){
    console.error(e);
    document.getElementById("pdfList").innerHTML =
      "<div>Failed to load PDFs</div>";
  }
}


/* Render list */
function renderList(){
  const q = document.getElementById("search").value.toLowerCase();
  const tag = document.getElementById("filter").value;
  const list = document.getElementById("pdfList");
  list.innerHTML = "";

  pdfs
    .filter(p => {
      const textMatch =
        !q || (p.title && p.title.toLowerCase().includes(q));

      const tagMatch =
        tag === "all" ||
        !Array.isArray(p.tags) ||
        p.tags.length === 0 ||
        p.tags.some(t => t.toLowerCase() === tag.toLowerCase());

      return textMatch && tagMatch;
    })
    .forEach((p,i)=>{
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <h3>${i+1}. ${p.title}</h3>
        <div class="meta">${Array.isArray(p.tags) ? p.tags.join(", ") : ""}</div>
      `;
      div.onclick = () => {
        window.location.href =
          `pdf_viewer.html?url=${encodeURIComponent(p.url)}&title=${encodeURIComponent(p.title)}`;
      };
      list.appendChild(div);
    });

  if(list.innerHTML === ""){
    list.innerHTML = "<div>No PDFs found</div>";
  }
}


document.addEventListener("DOMContentLoaded", loadPDFs);
</script>

</body>
</html>
